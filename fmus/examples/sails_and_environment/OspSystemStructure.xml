<?xml version="1.0" encoding="utf-8" ?>
<OspSystemStructure xmlns="http://opensimulationplatform.com/MSMI/OSPSystemStructure" version="0.1">
    
    <StartTime>0.0</StartTime>
    <BaseStepSize>0.01</BaseStepSize>
    <Algorithm>fixedStep</Algorithm>
    
    <Simulators>
        <Simulator name="wing_sails" source="../../stormbird_lifting_line/StormbirdLiftingLine.fmu">
            <InitialValues>
                <InitialValue variable = "setup_file_path"> <String value="stormbird_setup.json"/> </InitialValue>
                
                <InitialValue variable = "angles_in_degrees"> <Boolean value="true"/> </InitialValue>
                <InitialValue variable = "use_local_wing_angles"> <Boolean value="true"/> </InitialValue>
                <InitialValue variable = "use_wind_environment"> <Boolean value="true"/> </InitialValue>

            </InitialValues>
        </Simulator>

        <Simulator name="wind_environment" source="../../wind_environment/WindEnvironment.fmu">
            <InitialValues>
                <InitialValue variable = "power_law_coefficient"> <Real value="0.14"/> </InitialValue>
                <InitialValue variable = "reference_height"> <Real value="10.0"/> </InitialValue>
                <InitialValue variable = "up_direction_z"> <Real value="1.0"/> </InitialValue>
                <InitialValue variable = "use_list_1"> <Boolean value="true"/> </InitialValue>
                <InitialValue variable = "use_list_2"> <Boolean value="true"/> </InitialValue>

                <InitialValue variable = "reference_wind_velocity_x"> <Real value="7.07"/> </InitialValue>
                <InitialValue variable = "reference_wind_velocity_y"> <Real value="7.07"/> </InitialValue>
            </InitialValues>
        </Simulator>

        <Simulator name = "sail_controller" source="../../sail_controller/SailController.fmu">
            <InitialValues>
                <InitialValue variable = "setup_file_path"> <String value="sail_controller_setup.json"/> </InitialValue>
            </InitialValues>
        </Simulator>

    </Simulators>

    <Connections>
        <VariableConnection>
            <Variable simulator="wing_sails" name="freestream_velocity_points"/>
            <Variable simulator="wind_environment" name="points_list_1"/>
        </VariableConnection>

        <VariableConnection>
            <Variable simulator="wind_environment" name="velocity_list_1"/>
            <Variable simulator="wing_sails" name="wind_environment_velocities"/>
        </VariableConnection>

        <VariableConnection>
            <Variable simulator="sail_controller" name="velocity_measurement_points"/>
            <Variable simulator="wind_environment" name="points_list_2"/>
        </VariableConnection>

        <VariableConnection>
            <Variable simulator="wind_environment" name="velocity_list_2"/>
            <Variable simulator="sail_controller" name="velocity_measurements"/>
        </VariableConnection>

        <VariableConnection>
            <Variable simulator="sail_controller" name="local_wing_angles"/>
            <Variable simulator="wing_sails" name="local_wing_angles"/>
        </VariableConnection>

    </Connections>

</OspSystemStructure>