# Run Vesim and Stormbird together
This folder contains example files for running a Stormbird model together with models generated by 
ShipX and Vesim. 

The example will not work unless the same models as the example files are generated
by your local ShipX install. However, the purpose is to show how this can be achieved in a general 
way. 

## Steps to reproduce this setup for your ShipX model
### 0 - Install ShipX and set up a model
This instruction assumes you have ShipX installed and a ship model available that you want to use 
with Stormbird. Installation instructions and documentation for ShipX are not covered here. 

The FMI functionality in ShipX is only covered for ShipX version 4 and higher. The description here
is made using **ShipX 4.5**

### 1 - Ensure Vesim models can be executed by third-party FMI simulators, such as OSP
To allow the exported FMU-model to be executed by an external simulation tool, the 
`SINTEF_FMU_CRT_DIR` environmental variable must be set to point to the binaries folder of the ShipX 
FMUs.

The path is `[shipx installation folder]/plugins/no.sintef.ocean.shipx.fmu_0.0.1.v20240402-0600/fmu-runtime/binaries/`

This can be set in the environmental variable settings in Windows. Open the start menu and search 
for environmental variables. Choose the "Edit the system environmental variables" option and press 
the "Environmental Variables" button on the panel that is opened. Add a new system variable called 
`SINTEF_FMU_CRT_DIR`, with the path above (only corrected to your local ShipX installation folder)

### 2 - Export a Vesim model from ShipX
A ship model in ShipX can be exported as a Vesim model, by executing a `Vesim Run`. This will 
generate a XML file that contains a simulation setup using FMU models generated by ShipX. The 
simulation setup here assumes that the XML file from ShipX is moved to the same folder as this file, 
and is named `OspSystemStructure_from_ship_x.xml`.

The example in this folder is executed with custom ship controllers. 

### 3 - Add custom controllers to a reference simulation
*Add some explanation on the controller setup or how to change the controller setup*

### 4 - Add the Stormbird model
